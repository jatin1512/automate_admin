(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,type:s,...i}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>s])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardHeader",()=>i,"CardTitle",()=>r])},27612,37727,60102,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],27612);var s=e.i(43476),i=e.i(46932);let r=(0,t.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>r],37727);let l=(0,t.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),n=(0,t.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var o=e.i(47163);function d({className:e,...t}){return(0,s.jsx)(n,{role:"status","aria-label":"Loading",className:(0,o.cn)("size-4 animate-spin",e),...t})}var c=e.i(67881);let u={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},m={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},x={hidden:{scale:0},visible:{scale:1,transition:{type:"spring",stiffness:200,damping:20,delay:.1}}};function p({isOpen:e,onClose:t,onConfirm:a,title:n,description:o,itemName:p,isLoading:f=!1}){return e?(0,s.jsx)(i.motion.div,{variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:t,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)(i.motion.div,{variants:u,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,s.jsx)(i.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,s.jsx)(r,{size:24})})}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-12 pb-8 px-6",children:[(0,s.jsx)(i.motion.div,{variants:x,initial:"hidden",animate:"visible",className:"w-24 h-24 rounded-full bg-red-50 flex items-center justify-center mb-6",children:(0,s.jsx)(l,{size:48,className:"text-red-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground text-center mb-3",children:n}),(0,s.jsxs)("p",{className:"text-center text-muted-foreground leading-relaxed mb-8",children:[o,p&&(0,s.jsxs)("span",{className:"font-semibold",children:[" '",p,"'"]})]}),(0,s.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,s.jsx)(i.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,s.jsx)(c.Button,{onClick:t,variant:"outline",className:"w-full rounded-lg font-semibold",disabled:f,children:"No, Cancel"})}),(0,s.jsx)(i.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,s.jsx)(c.Button,{onClick:a,className:"w-full rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold flex items-center justify-center",disabled:f,children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{className:"mr-2 h-4 w-4"}),"Deleting..."]}):"Yes, Delete"})})]})]})]})}):null}e.s(["default",()=>p],60102)},30030,e=>{"use strict";var t=e.i(71645),a=e.i(43476);function s(e,i=[]){let r=[],l=()=>{let a=r.map(e=>t.createContext(e));return function(s){let i=s?.[e]||a;return t.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return l.scopeName=e,[function(s,i){let l=t.createContext(i),n=r.length;r=[...r,i];let o=s=>{let{scope:i,children:r,...o}=s,d=i?.[e]?.[n]||l,c=t.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:r})};return o.displayName=s+"Provider",[o,function(a,r){let o=r?.[e]?.[n]||l,d=t.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error(`\`${a}\` must be used within \`${s}\``)}]},function(...e){let a=e[0];if(1===e.length)return a;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=s.reduce((t,{useScope:a,scopeName:s})=>{let i=a(e)[`__scope${s}`];return{...t,...i}},{});return t.useMemo(()=>({[`__scope${a.scopeName}`]:i}),[i])}};return s.scopeName=a.scopeName,s}(l,...i)]}e.s(["createContextScope",()=>s])},30207,34620,e=>{"use strict";var t=e.i(71645);function a(e){let a=t.useRef(e);return t.useEffect(()=>{a.current=e}),t.useMemo(()=>(...e)=>a.current?.(...e),[])}e.s(["useCallbackRef",()=>a],30207);var s=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>s],34620)},48425,e=>{"use strict";var t=e.i(71645),a=e.i(74080),s=e.i(91918),i=e.i(43476),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let r=t.forwardRef((e,t)=>{let{asChild:r,...l}=e,n=r?s.Slot:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n,{...l,ref:t})});return r.displayName=`Primitive.${a}`,{...e,[a]:r}},{});function l(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>r,"dispatchDiscreteCustomEvent",()=>l])},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},22551,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),s=e.i(46932),i=e.i(88653),r=e.i(55436),l=e.i(27612),n=e.i(67881),o=e.i(47163),d=e.i(70065),c=e.i(23750),u=e.i(30030),m=e.i(30207),x=e.i(34620),p=e.i(48425),f="Avatar",[h,g]=(0,u.createContextScope)(f),[b,v]=h(f),y=a.forwardRef((e,s)=>{let{__scopeAvatar:i,...r}=e,[l,n]=a.useState("idle");return(0,t.jsx)(b,{scope:i,imageLoadingStatus:l,onImageLoadingStatusChange:n,children:(0,t.jsx)(p.Primitive.span,{...r,ref:s})})});y.displayName=f;var j="AvatarImage",N=a.forwardRef((e,s)=>{let{__scopeAvatar:i,src:r,onLoadingStatusChange:l=()=>{},...n}=e,o=v(j,i),d=function(e,t){let[s,i]=a.useState("idle");return(0,x.useLayoutEffect)(()=>{if(!e)return void i("error");let a=!0,s=new window.Image,r=e=>()=>{a&&i(e)};return i("loading"),s.onload=r("loaded"),s.onerror=r("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{a=!1}},[e,t]),s}(r,n.referrerPolicy),c=(0,m.useCallbackRef)(e=>{l(e),o.onImageLoadingStatusChange(e)});return(0,x.useLayoutEffect)(()=>{"idle"!==d&&c(d)},[d,c]),"loaded"===d?(0,t.jsx)(p.Primitive.img,{...n,ref:s,src:r}):null});N.displayName=j;var w="AvatarFallback",C=a.forwardRef((e,s)=>{let{__scopeAvatar:i,delayMs:r,...l}=e,n=v(w,i),[o,d]=a.useState(void 0===r);return a.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&"loaded"!==n.imageLoadingStatus?(0,t.jsx)(p.Primitive.span,{...l,ref:s}):null});function k({className:e,...a}){return(0,t.jsx)(y,{"data-slot":"avatar",className:(0,o.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...a})}function S({className:e,...a}){return(0,t.jsx)(N,{"data-slot":"avatar-image",className:(0,o.cn)("aspect-square size-full",e),...a})}function P({className:e,...a}){return(0,t.jsx)(C,{"data-slot":"avatar-fallback",className:(0,o.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...a})}C.displayName=w;var T=e.i(60102);let z="http://localhost:3000/api";function L(){let[e,u]=(0,a.useState)(""),[m,x]=(0,a.useState)([]),[p,f]=(0,a.useState)(!0),[h,g]=(0,a.useState)({open:!1,user:null}),[b,v]=(0,a.useState)(null),[y,j]=(0,a.useState)(1),[N,w]=(0,a.useState)(20),C=async(e=1,t=N)=>{f(!0);try{let a=localStorage.getItem("token"),s=await fetch(`${z}/user/all?page=${e}&limit=${t}`,{method:"GET",headers:{"content-type":"application/json",...a?{authorization:a}:{}}}),i=await s.json().catch(()=>({})),r=i?.code??(s.ok?200:s.status);200===r&&i?.data&&Array.isArray(i.data.users)?(x(i.data.users),v(i.data.pagination??null)):console.error("Failed to fetch users",i?.message||"Unknown error")}catch(e){console.error("Network error","Could not fetch users")}finally{f(!1)}};(0,a.useEffect)(()=>{C(y,N)},[y,N]);let L=async e=>{g(e=>({...e,isLoading:!0}));try{let t=localStorage.getItem("token"),a=await fetch(`${z}/user/delete/${e}`,{method:"DELETE",headers:{"content-type":"application/json",...t?{authorization:t}:{}}}),s=await a.json().catch(()=>({})),i=s?.code??(a.ok?200:a.status);200===i?(console.log("Deleted",s?.message||"User deleted"),C(y)):console.error("Delete failed",s?.message||"Could not delete user")}catch(e){console.error("Network error","Could not delete user")}finally{g({open:!1,user:null})}},E=m.filter(t=>!e||(t.name||"").toLowerCase().includes(e.toLowerCase())||(t.email||"").toLowerCase().includes(e.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0",children:(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Users Management"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 max-w-xl bg-background border border-border rounded-lg px-3 md:px-4 py-2",children:[(0,t.jsx)(r.Search,{size:18,className:"text-muted-foreground shrink-0"}),(0,t.jsx)(c.Input,{placeholder:"Search by name, email...",value:e,onChange:e=>u(e.target.value),className:"border-0 shadow-none focus-visible:ring-0 text-sm"}),(0,t.jsxs)("div",{className:"ml-3 hidden sm:flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-xs text-muted-foreground",children:"Show"}),(0,t.jsxs)("select",{value:N,onChange:e=>{w(Number(e.target.value)||20),j(1)},className:"text-sm bg-background border border-border rounded px-2 py-1",children:[(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:20,children:"20"}),(0,t.jsx)("option",{value:50,children:"50"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(d.Card,{children:(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase",children:"Name"}),(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase hidden sm:table-cell",children:"Email"}),(0,t.jsx)("th",{className:"text-center py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase hidden md:table-cell",children:"Mobile No"}),(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase hidden lg:table-cell",children:"Date Joined"}),(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase",children:"Action"})]})}),(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:(0,t.jsx)(s.motion.tbody,{variants:{hidden:{opacity:0,y:6},visible:{opacity:1,y:0,transition:{staggerChildren:.03}},exit:{opacity:0,y:-6}},initial:"hidden",animate:"visible",exit:"exit",children:(p?Array(6).fill(null):E).map((e,a)=>(0,t.jsxs)(s.motion.tr,{variants:{visible:{opacity:1,y:0,transition:{type:"spring",stiffness:120,damping:18}},exit:{opacity:0,y:-8}},whileHover:{},className:"border-b border-border hover:bg-accent/50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,t.jsxs)(k,{className:"h-8 w-8 md:h-10 md:w-10",children:[!p&&e?.user_image?(0,t.jsx)(S,{src:`https://automate3d-dev.com/automate_api/dist/uploads/${e.user_image}`}):(0,t.jsx)(S,{src:"/placeholder.svg"}),(0,t.jsx)(P,{children:p?"":(e?.name||"--").slice(0,2).toUpperCase()})]}),(0,t.jsx)("div",{className:"font-medium text-foreground text-sm",children:p?(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-28"}):e?.name})]})}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4 text-muted-foreground hidden sm:table-cell text-xs md:text-sm",children:p?(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-40"}):e?.email}),(0,t.jsx)("td",{className:"py-3 text-center md:py-4 px-3 md:px-4 text-muted-foreground hidden md:table-cell text-xs md:text-sm",children:p?(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-32"}):e?.mobile_number?e.mobile_number:"-"}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4 text-muted-foreground hidden lg:table-cell text-xs md:text-sm",children:p?(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-28"}):(0,o.formatDate)(e?.date_joined)}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsx)("button",{onClick:()=>g({open:!0,user:e}),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(l.Trash2,{size:16})})})]},e?.id??a))},`page-${y}-limit-${N}`)})]})}),(0,t.jsxs)("div",{className:"mt-4 md:mt-6 flex flex-col sm:flex-row items-center justify-between gap-4 sm:gap-0",children:[(0,t.jsxs)("p",{className:"text-xs md:text-sm text-muted-foreground",children:["Showing"," ",b?(b.currentPage-1)*b.perPage+1:1," ","to"," ",b?Math.min(b.currentPage*b.perPage,b.total):m.length||0," ","of ",b?.total??m.length??0," results"]}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2 overflow-x-auto",children:[(0,t.jsx)(n.Button,{variant:"outline",size:"sm",disabled:y<=1,onClick:()=>j(e=>Math.max(1,e-1)),className:"text-xs md:text-sm",children:"←"}),Array.from({length:b?.totalPages??1}).map((e,a)=>(0,t.jsx)(n.Button,{variant:a+1===y?"default":"outline",size:"sm",className:`text-xs md:text-sm ${a+1===y?"bg-blue-600":""}`,onClick:()=>j(a+1),children:a+1},a)),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",disabled:!!b&&y>=b.totalPages,onClick:()=>j(e=>e+1),className:"text-xs md:text-sm",children:"→"})]})]})]})})}),(0,t.jsx)(i.AnimatePresence,{children:h.open&&(0,t.jsx)(T.default,{isOpen:h.open,onClose:()=>g({open:!1,user:null}),onConfirm:()=>L(h.user.id),title:"Confirm Deletion",description:"You are about to permanently delete the user. This action cannot be undone.",itemName:h.user?.name,isLoading:h.isLoading})})]})}e.s(["default",()=>L],22551)}]);