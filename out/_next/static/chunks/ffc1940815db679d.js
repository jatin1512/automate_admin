(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,type:i,...s}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>i])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function s({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function r({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...i})}function l({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>l,"CardHeader",()=>s,"CardTitle",()=>r])},27612,37727,60102,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],27612);var i=e.i(43476),s=e.i(46932);let r=(0,t.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>r],37727);let l=(0,t.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),n=(0,t.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=e.i(47163);function o({className:e,...t}){return(0,i.jsx)(n,{role:"status","aria-label":"Loading",className:(0,d.cn)("size-4 animate-spin",e),...t})}var c=e.i(67881);let u={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},m={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},x={hidden:{scale:0},visible:{scale:1,transition:{type:"spring",stiffness:200,damping:20,delay:.1}}};function h({isOpen:e,onClose:t,onConfirm:a,title:n,description:d,itemName:h,isLoading:f=!1}){return e?(0,i.jsx)(s.motion.div,{variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:t,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)(s.motion.div,{variants:u,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,i.jsx)(s.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,i.jsx)(r,{size:24})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center pt-12 pb-8 px-6",children:[(0,i.jsx)(s.motion.div,{variants:x,initial:"hidden",animate:"visible",className:"w-24 h-24 rounded-full bg-red-50 flex items-center justify-center mb-6",children:(0,i.jsx)(l,{size:48,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-foreground text-center mb-3",children:n}),(0,i.jsxs)("p",{className:"text-center text-muted-foreground leading-relaxed mb-8",children:[d,h&&(0,i.jsxs)("span",{className:"font-semibold",children:[" '",h,"'"]})]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)(s.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,i.jsx)(c.Button,{onClick:t,variant:"outline",className:"w-full rounded-lg font-semibold",disabled:f,children:"No, Cancel"})}),(0,i.jsx)(s.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,i.jsx)(c.Button,{onClick:a,className:"w-full rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold flex items-center justify-center",disabled:f,children:f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{className:"mr-2 h-4 w-4"}),"Deleting..."]}):"Yes, Delete"})})]})]})]})}):null}e.s(["default",()=>h],60102)},92930,e=>{"use strict";let t=(0,e.i(75254).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],92930)},71428,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...i})}e.s(["Skeleton",()=>i])},37538,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),i=e.i(46932),s=e.i(88653),r=e.i(92930),l=e.i(27612),n=e.i(67881),d=e.i(70065),o=e.i(23750),c=e.i(60102),u=e.i(37727);let m={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},x={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};function h({isOpen:e,onClose:s,onSave:r,initial:l}){let[d,c]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{c(l?.year?String(l.year):"")},[l]),!e)return null;async function p(){if(d.trim())try{f(!0),await r(d.trim(),l?.id),s()}finally{f(!1)}}return(0,t.jsx)(i.motion.div,{variants:x,initial:"hidden",animate:"visible",exit:"exit",onClick:s,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(i.motion.div,{variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-lg w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:l?.id?"Edit Year":"Add New Year"}),(0,t.jsx)("button",{onClick:s,className:"text-muted-foreground hover:text-foreground",children:(0,t.jsx)(u.X,{size:24})})]}),(0,t.jsx)("div",{className:"p-6 space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Year"}),(0,t.jsx)(o.Input,{value:d,onChange:e=>c(e.target.value),type:"number",placeholder:"e.g. 2012"})]})}),(0,t.jsxs)("div",{className:"flex gap-4 p-6 border-t justify-end bg-gray-50",children:[(0,t.jsx)(n.Button,{variant:"outline",onClick:s,disabled:h,children:"Cancel"}),(0,t.jsx)(i.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(n.Button,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:p,disabled:h,children:h?"Saving...":"Save"})})]})]})})}var f=e.i(71428),p=e.i(5766);let y="http://localhost:3000/api",b=[{id:1,year:2025},{id:2,year:2024},{id:3,year:2023}];function g(){let[e,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(b),[g,v]=(0,a.useState)(""),[j,w]=(0,a.useState)({open:!1,year:null}),[N,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[T,z]=(0,a.useState)(!1),[Y,E]=(0,a.useState)(!1);function A(){try{return localStorage.getItem("token")||""}catch(e){return""}}async function B(){z(!0);try{let e=A(),t=await fetch(`${y}/car/model-year`,{headers:e?{authorization:e}:void 0}),a=await t.json(),i=a?.code??(t.ok?200:t.status);if(200===i){let e=(a.data||[]).slice().sort((e,t)=>(e.year||0)-(t.year||0));x(e)}else p.default.error(a?.message||"Failed to load years")}catch(e){p.default.error("Network error")}finally{z(!1)}}(0,a.useEffect)(()=>{B()},[]);let H=m.filter(e=>e.year.toString().includes(g)).sort((e,t)=>e.year-t.year),$=async()=>{e.trim()&&(C?(await M(e.trim(),C.id),S(null)):await M(e.trim()),u(""))};async function M(e,t){let a=A();try{let i=t?`${y}/car/edit-model-year/${t}`:`${y}/car/add-model-year`,s=await fetch(i,{method:"POST",headers:{"content-type":"application/json",...a?{authorization:a}:{}},body:JSON.stringify({year:e})}),r=await s.json(),l=r?.code??(s.ok?200:s.status);200===l?(p.default.success(t?"Year updated":"Year added"),await B()):p.default.error(r?.message||"Failed to save year")}catch(e){p.default.error("Network error")}}async function I(e){let t=A();try{let a=await fetch(`${y}/car/model-year/${e}`,{method:"DELETE",headers:t?{authorization:t}:void 0}),i=await a.json(),s=i?.code??(a.ok?200:a.status);if(200!==s)return p.default.error(i?.message||"Failed to delete year"),!1;p.default.success(i?.message||"Year deleted successfully");try{let a=await fetch(`${y}/car/all-car-model`,{headers:t?{authorization:t}:void 0}),i=await a.json(),s=i?.code??(a.ok?200:a.status);if(200===s){let a=Array.isArray(i.data)?i.data:i.data?.data||[];for(let i of Array.from(new Set(a.filter(t=>Number(t.modelYearId)===Number(e)).map(e=>e.carCompanyId).filter(Boolean))))try{let e=await fetch(`${y}/car/car-company/${i}`,{method:"DELETE",headers:t?{authorization:t}:void 0});await e.json()}catch(e){p.default.error(`Network error deleting company ${i}`)}}}catch(e){console.error("Failed to fetch models after deleting year:",e)}return await B(),!0}catch(e){return p.default.error("Network error"),!1}}return(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Years Management"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"",children:(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{className:"pb-3 md:pb-4",children:(0,t.jsx)(d.CardTitle,{className:"text-lg md:text-xl",children:C?"Edit Year":"Add New Year"})}),(0,t.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs md:text-sm font-medium text-foreground mb-2 block",children:"Year"}),(0,t.jsx)(o.Input,{placeholder:"e.g., 2024",value:e,onChange:e=>u(e.target.value),type:"number",className:"rounded-lg text-sm"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsx)(i.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,t.jsx)(n.Button,{onClick:$,className:"w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-sm md:text-base",children:C?"Save Changes":"Add Year"})}),(0,t.jsx)(i.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 sm:flex-none",children:C?(0,t.jsx)(n.Button,{onClick:()=>{S(null),u("")},variant:"outline",className:"w-full rounded-lg font-semibold text-sm md:text-base",children:"Cancel"}):(0,t.jsx)(n.Button,{onClick:()=>u(""),variant:"outline",className:"w-full rounded-lg font-semibold text-sm md:text-base",children:"Clear"})})]})]})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"pb-3 md:pb-4",children:[(0,t.jsx)(d.CardTitle,{className:"text-lg md:text-xl mb-3 md:mb-4",children:"Existing Years"}),(0,t.jsx)(o.Input,{placeholder:"Search years...",value:g,onChange:e=>v(e.target.value),className:"rounded-lg text-sm"})]}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(0,t.jsx)("div",{children:T?Array.from({length:6}).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 md:p-3 border border-border rounded-lg",children:[(0,t.jsx)("div",{className:"w-24",children:(0,t.jsx)(f.Skeleton,{className:"h-4 w-24"})}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,t.jsx)(f.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(f.Skeleton,{className:"h-8 w-8 rounded-full"})]})]},a)):H.length>0?H.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 mb-2 md:p-3 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,t.jsx)("span",{className:"font-semibold text-foreground text-sm md:text-base",children:e.year}),(0,t.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,t.jsx)("button",{className:"text-blue-600 hover:text-blue-700",onClick:()=>{S({id:e.id,year:e.year}),u(String(e.year)),window.scrollTo({top:0,behavior:"smooth"})},children:(0,t.jsx)(r.Edit2,{size:16})}),(0,t.jsx)("button",{onClick:()=>w({open:!0,year:e}),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(l.Trash2,{size:16})})]})]},e.id)):(0,t.jsx)("p",{className:"text-center text-muted-foreground py-4 text-sm",children:"No years found"})})})})]})})]}),(0,t.jsx)(s.AnimatePresence,{children:j.open&&(0,t.jsx)(c.default,{isOpen:j.open,onClose:()=>w({open:!1,year:null}),onConfirm:async()=>{let e=j.year?.id;if(e){E(!0);try{await I(e)&&w({open:!1,year:null})}finally{E(!1)}}},title:"Confirm Deletion",description:"You are about to permanently delete the year. This action will also delete all related car models, sub-models, and cars, and cannot be undone. Do you want to proceed?",itemName:j.year?.year.toString(),isLoading:Y})}),(0,t.jsx)(h,{isOpen:N,onClose:()=>k(!1),onSave:async(e,t)=>{await M(e,t)},initial:C})]})}e.s(["default",()=>g],37538)}]);