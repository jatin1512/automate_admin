(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71428,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...i})}e.s(["Skeleton",()=>i])},23750,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,type:i,...s}){return(0,t.jsx)("input",{type:i,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>i])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function i({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...i})}function s({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...i})}function n({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...i})}function l({className:e,...i}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...i})}e.s(["Card",()=>i,"CardContent",()=>l,"CardHeader",()=>s,"CardTitle",()=>n])},27612,37727,60102,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],27612);var i=e.i(43476),s=e.i(46932);let n=(0,t.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>n],37727);let l=(0,t.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),r=(0,t.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=e.i(47163);function o({className:e,...t}){return(0,i.jsx)(r,{role:"status","aria-label":"Loading",className:(0,d.cn)("size-4 animate-spin",e),...t})}var c=e.i(67881);let m={hidden:{opacity:0,scale:.95,y:-20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.2}}},u={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},x={hidden:{scale:0},visible:{scale:1,transition:{type:"spring",stiffness:200,damping:20,delay:.1}}};function p({isOpen:e,onClose:t,onConfirm:a,title:r,description:d,itemName:p,isLoading:h=!1}){return e?(0,i.jsx)(s.motion.div,{variants:u,initial:"hidden",animate:"visible",exit:"exit",onClick:t,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)(s.motion.div,{variants:m,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[(0,i.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,i.jsx)(s.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:t,className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,i.jsx)(n,{size:24})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center pt-12 pb-8 px-6",children:[(0,i.jsx)(s.motion.div,{variants:x,initial:"hidden",animate:"visible",className:"w-24 h-24 rounded-full bg-red-50 flex items-center justify-center mb-6",children:(0,i.jsx)(l,{size:48,className:"text-red-600"})}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-foreground text-center mb-3",children:r}),(0,i.jsxs)("p",{className:"text-center text-muted-foreground leading-relaxed mb-8",children:[d,p&&(0,i.jsxs)("span",{className:"font-semibold",children:[" '",p,"'"]})]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)(s.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,i.jsx)(c.Button,{onClick:t,variant:"outline",className:"w-full rounded-lg font-semibold",disabled:h,children:"No, Cancel"})}),(0,i.jsx)(s.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1",children:(0,i.jsx)(c.Button,{onClick:a,className:"w-full rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold flex items-center justify-center",disabled:h,children:h?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{className:"mr-2 h-4 w-4"}),"Deleting..."]}):"Yes, Delete"})})]})]})]})}):null}e.s(["default",()=>p],60102)},92930,e=>{"use strict";let t=(0,e.i(75254).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],92930)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},51484,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),i=e.i(46932),s=e.i(88653),n=e.i(7233),l=e.i(92930),r=e.i(27612),d=e.i(55436),o=e.i(67881),c=e.i(47163),m=e.i(70065),u=e.i(23750),x=e.i(60102),p=e.i(37727);let h={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.95,transition:{duration:.2}}},f={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};function y({isOpen:e,onClose:s,onSave:n,initial:l}){let[r,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{d(l?.name??"")},[l]),!e)return null;async function x(){if(r.trim())try{m(!0),await n(r.trim(),l?.id),s()}finally{m(!1)}}return(0,t.jsx)(i.motion.div,{variants:f,initial:"hidden",animate:"visible",exit:"exit",onClick:s,className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(i.motion.div,{variants:h,initial:"hidden",animate:"visible",exit:"exit",onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg shadow-lg w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:l?.id?"Edit Company":"Add New Company"}),(0,t.jsx)("button",{onClick:()=>{d(""),s()},className:"text-muted-foreground hover:text-foreground",children:(0,t.jsx)(p.X,{size:24})})]}),(0,t.jsx)("div",{className:"p-6 space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Company Name"}),(0,t.jsx)(u.Input,{value:r,onChange:e=>d(e.target.value),placeholder:"e.g. Maruti"})]})}),(0,t.jsxs)("div",{className:"flex gap-4 p-6 border-t justify-end bg-gray-50",children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>{d(""),s()},disabled:c,children:"Cancel"}),(0,t.jsx)(i.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(o.Button,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:x,disabled:c,children:c?"Saving...":"Save"})})]})]})})}var b=e.i(71428),g=e.i(5766);let j="https://automate3d-dev.com/api";function v(){let[e,p]=(0,a.useState)(""),[h,f]=(0,a.useState)({open:!1,company:null}),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(null),[z,T]=(0,a.useState)([]),[M,P]=(0,a.useState)(!1);function A(){try{return localStorage.getItem("token")||""}catch(e){return""}}async function E(){P(!0);try{let e=A(),t=await fetch(`${j}/car/car-company`,{headers:e?{authorization:e}:void 0}),a=await t.json();t.ok?T(a.data||[]):g.default.error(a.message||"Failed to load companies")}catch(e){g.default.error("Error fetching companies")}finally{P(!1)}}async function D(e,t){let a=A();try{if(t){let i=await fetch(`${j}/car/edit-car-company/${t}`,{method:"POST",headers:{"content-type":"application/json",...a?{authorization:a}:{}},body:JSON.stringify({name:e})}),s=await i.json();if(i.ok){g.default.success(s.message||"Company updated"),await E();return}}let i=await fetch(`${j}/car/add-car-company`,{method:"POST",headers:{"content-type":"application/json",...a?{authorization:a}:{}},body:JSON.stringify({name:e})}),s=await i.json();i.ok?(g.default.success(s.message||"Company added"),await E()):g.default.error(s.message||"Failed to save")}catch(e){g.default.error("Network error")}}async function H(e){let t=A();try{let a=await fetch(`${j}/car/car-company/${e}`,{method:"DELETE",headers:t?{authorization:t}:void 0}),i=await a.json();if(a.ok)return g.default.success(i.message||"Company deleted"),await E(),!0;return g.default.error(i.message||"Failed to delete"),!1}catch(e){return g.default.error("Network error"),!1}}(0,a.useEffect)(()=>{E()},[]);let O=z.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Companies Management"})}),(0,t.jsx)(i.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsxs)(o.Button,{onClick:()=>{S(null),k(!0)},className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white gap-2 text-sm md:text-base",children:[(0,t.jsx)(n.Plus,{size:18}),"Add New Company"]})})]}),(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(m.Card,{children:[(0,t.jsx)(m.CardHeader,{className:"pb-3 md:pb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-background border border-border rounded-lg px-3 md:px-4 py-2",children:[(0,t.jsx)(d.Search,{size:18,className:"text-muted-foreground shrink-0"}),(0,t.jsx)(u.Input,{placeholder:"Search by company name...",value:e,onChange:e=>p(e.target.value),className:"border-0 focus-visible:ring-0 text-sm"})]})}),(0,t.jsx)(m.CardContent,{children:(0,t.jsx)("div",{className:"overflow-hidden -mx-4 md:mx-0",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase",children:"Name"}),(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase hidden sm:table-cell",children:"Creation Date"}),(0,t.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs font-semibold text-muted-foreground uppercase",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:M?Array.from({length:6}).map((e,a)=>(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsx)(b.Skeleton,{className:"h-4 w-48"})}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4 hidden sm:table-cell",children:(0,t.jsx)(b.Skeleton,{className:"h-4 w-28"})}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[(0,t.jsx)(b.Skeleton,{className:"h-8 w-8 rounded-full"}),(0,t.jsx)(b.Skeleton,{className:"h-8 w-8 rounded-full"})]})})]},a)):O.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-accent/50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsx)("div",{className:"font-medium text-foreground text-sm",children:e.name})}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4 text-muted-foreground hidden sm:table-cell text-sm",children:(0,c.formatDate)(e.createdAt||e.createdDate)}),(0,t.jsx)("td",{className:"py-3 md:py-4 px-3 md:px-4",children:(0,t.jsxs)("div",{className:"flex gap-2 md:gap-3",children:[(0,t.jsx)("button",{className:"text-blue-600 hover:text-blue-700",onClick:()=>{S({id:e.id,name:e.name}),k(!0)},children:(0,t.jsx)(l.Edit2,{size:16})}),(0,t.jsx)("button",{onClick:()=>f({open:!0,company:e}),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(r.Trash2,{size:16})})]})})]}))})]})})})]})}),(0,t.jsx)(y,{isOpen:w,onClose:()=>k(!1),onSave:async(e,t)=>{await D(e,t)},initial:C}),(0,t.jsx)(s.AnimatePresence,{children:h.open&&(0,t.jsx)(x.default,{isOpen:h.open,onClose:()=>f({open:!1,company:null}),onConfirm:async()=>{let e=h.company?.id;if(e){N(!0);try{await H(e)&&f({open:!1,company:null})}finally{N(!1)}}},title:"Confirm Deletion",description:"You are about to permanently delete the company. This action will also delete all related car models, sub-models, and cars and cannot be undone. Do you want to proceed?",itemName:h.company?.name,isLoading:v})})]})}e.s(["default",()=>v],51484)}]);